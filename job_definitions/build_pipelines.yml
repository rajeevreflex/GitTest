---
#### This file contains the build pipelines for the various projects.

# You should create one project per product and link all the steps

# - project:
#     name: ESIM
#     node: esim-buildslave01
#     jobs:
#       - '{name}-terraform-validate'
#       - '{name}-terraform-build'
#       - '{name}-terraform-destroy'

- project:
    name: esim-aws
    config_code_repository_credentials: 10b4587a-9464-4766-9207-be5f4a03dc00
    config_code_repository_display_name: eSIM Jenkins
    config_code_repository_display_email: vodafone-devops-internal@devopsguys.com
    config_code_repository_name: vfdo-esim-platform
    config_code_repository_type: git
    config_code_repository_uri: ssh://git@platform.devops.vodafone.com:7999/vfleap/vfdo-esim-platform.git
    app_code_repository_credentials: 10b4587a-9464-4766-9207-be5f4a03dc00
    app_code_repository_display_name: eSIM Jenkins
    app_code_repository_display_email: vodafone-devops-internal@devopsguys.com
    app_code_repository_name: vfleap
    app_code_repository_type: git
    app_code_repository_uri: ssh://git@platform.devops.vodafone.com:7999/vfleap/vfleap_repository.git
    workspace_clone_glob: 'LEAP/**'
    js_app_file: vfleap.js
    repo_language: nodejs
    jobs:
      - '{name}-checkout-code-master'
      # - '{name}-rebase-on-master'
      # - '{name}-nodejs-lint'
      # - '{name}-nodejs-unittest'
      # # - '{name}-merge-to-master'
      - '{name}-build-artefact'
    #  - '{name}-deploy-to-systemtest'
      - '{name}-deploy-to-{environment}':
          environment: systemtest
          next_environment: dev
      - '{name}-deploy-to-{environment}':
          environment: dev
          next_environment: staging
      - '{name}-deploy-to-{environment}':
          environment: staging
          next_environment: preprod
      - '{name}-deploy-to-{environment}':
          environment: preprod
          next_environment: production
      - '{name}-deploy-to-{environment}':
          environment: production
          next_environment: none
